<!--pages/mylayout/mylayout.wxml-->
<van-collapse value="{{activeNames}}" bind:change="onCollapseChange">
  <van-collapse-item wx:for="{{list}}" wx:key="id" name="{{item.id}}">
    <view slot="title" class="level1" style="display: flex; justify-content: space-between; align-items: center;">
      <text>{{item.title}}</text>
      <view style="display: flex; gap: 8px;">
        <button data-level="1" data-id="{{item.id}}" bindtap="showAddInput">＋</button>
        <button data-level="1" data-id="{{item.id}}" data-type="up" bindtap="handleVote">👍{{item.up}}</button>
        <button data-level="1" data-id="{{item.id}}" data-type="down" bindtap="handleVote">👎{{item.down}}</button>
      </view>
    </view>
    <!-- 二级和三级内容放在内容区 -->
    <view wx:for="{{item.children}}" wx:key="id">
      <view class="level2" style="display: flex; justify-content: space-between; align-items: center;">
        <text>{{item.title}}</text>
        <view style="display: flex; gap: 8px;">
          <button data-level="2" data-id="{{item.id}}" bindtap="showAddInput">＋</button>
          <button data-level="2" data-id="{{item.id}}" data-type="up" bindtap="handleVote">👍{{item.up}}</button>
          <button data-level="2" data-id="{{item.id}}" data-type="down" bindtap="handleVote">👎{{item.down}}</button>
        </view>
      </view>
      <view wx:for="{{item.children}}" wx:key="id">
        <view class="level3" style="display: flex; justify-content: space-between; align-items: center;">
          <text>{{item.title}}</text>
          <view style="display: flex; gap: 8px;">
            <button data-level="3" data-id="{{item.id}}" data-type="up" bindtap="handleVote">👍{{item.up}}</button>
            <button data-level="3" data-id="{{item.id}}" data-type="down" bindtap="handleVote">👎{{item.down}}</button>
          </view>
        </view>
      </view>
    </view>
  </van-collapse-item>
</van-collapse>
<button data-level="0" bindtap="showAddInput">＋</button>

<view wx:if="{{showDialog}}" class="dialog-mask">
  <view class="dialog-box">
    <view class="dialog-title">添加内容</view>
    <input value="{{inputValue}}" bindinput="onInputChange" placeholder="请输入内容" class="dialog-input" />
    <view class="dialog-actions">
      <button bindtap="onDialogConfirm">确定</button>
      <button bindtap="onDialogClose">取消</button>
    </view>
  </view>
</view>
