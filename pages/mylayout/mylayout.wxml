<!--pages/mylayout/mylayout.wxml-->
<van-collapse value="{{activeNames}}" bind:change="onCollapseChange">
  <van-collapse-item wx:for="{{list}}" wx:key="id" name="{{item.id}}">
    <view slot="title" class="level1" style="display: flex; justify-content: space-between; align-items: center;">
      <text>{{item.title}}</text>
      <view style="display: flex; gap: 8px;">
        <button data-level="1" data-id="{{item.id}}" bindtap="showAddInput">ï¼‹</button>
        <button data-level="1" data-id="{{item.id}}" data-type="up" bindtap="handleVote">ğŸ‘{{item.up}}</button>
        <button data-level="1" data-id="{{item.id}}" data-type="down" bindtap="handleVote">ğŸ‘{{item.down}}</button>
      </view>
    </view>
    <!-- äºŒçº§å’Œä¸‰çº§å†…å®¹æ”¾åœ¨å†…å®¹åŒº -->
    <view wx:for="{{item.children}}" wx:key="id">
      <view class="level2" style="display: flex; justify-content: space-between; align-items: center;">
        <text>{{item.title}}</text>
        <view style="display: flex; gap: 8px;">
          <button data-level="2" data-id="{{item.id}}" bindtap="showAddInput">ï¼‹</button>
          <button data-level="2" data-id="{{item.id}}" data-type="up" bindtap="handleVote">ğŸ‘{{item.up}}</button>
          <button data-level="2" data-id="{{item.id}}" data-type="down" bindtap="handleVote">ğŸ‘{{item.down}}</button>
        </view>
      </view>
      <view wx:for="{{item.children}}" wx:key="id">
        <view class="level3" style="display: flex; justify-content: space-between; align-items: center;">
          <text>{{item.title}}</text>
          <view style="display: flex; gap: 8px;">
            <button data-level="3" data-id="{{item.id}}" data-type="up" bindtap="handleVote">ğŸ‘{{item.up}}</button>
            <button data-level="3" data-id="{{item.id}}" data-type="down" bindtap="handleVote">ğŸ‘{{item.down}}</button>
          </view>
        </view>
      </view>
    </view>
  </van-collapse-item>
</van-collapse>
<button data-level="0" bindtap="showAddInput">ï¼‹</button>

<view wx:if="{{showDialog}}" class="dialog-mask">
  <view class="dialog-box">
    <view class="dialog-title">æ·»åŠ å†…å®¹</view>
    <input value="{{inputValue}}" bindinput="onInputChange" placeholder="è¯·è¾“å…¥å†…å®¹" class="dialog-input" />
    <view class="dialog-actions">
      <button bindtap="onDialogConfirm">ç¡®å®š</button>
      <button bindtap="onDialogClose">å–æ¶ˆ</button>
    </view>
  </view>
</view>
